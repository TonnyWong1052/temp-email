# ===================================
# 临时邮箱服务配置
# ===================================

# ===================================
# 服务器配置
# ===================================
PORT=1234
HOST=0.0.0.0
# RELOAD=true                   # 代码更改时自动重载（仅开发环境）

# ===================================
# 邮件服务
# ===================================
EMAIL_TTL=3600                # 邮箱过期时间（秒）
MAIL_CHECK_INTERVAL=10        # 邮件轮询间隔（秒）
MAX_MAILS_PER_EMAIL=50        # 每个邮箱最多保存的邮件数量

# ===================================
# Redis 配置（高流量支持）
# ===================================
REDIS_URL=redis://localhost:6379/0  # Redis 连接 URL
ENABLE_REDIS=true                    # 启用 Redis 分布式存储（⚠️ 需要先安装 Redis）
CACHE_TTL=30                         # 缓存刷新间隔（秒）
CACHE_MAX_SIZE=10000                 # 最大缓存条目数

# ===================================
# 流量控制配置
# ===================================
RATE_LIMIT_ENABLED=true              # 启用 API 限流
RATE_LIMIT_PER_MINUTE=60             # 每个 IP 每分钟最大请求数
CIRCUIT_BREAKER_ENABLED=true         # 启用断路器（API 失败时自动降级）
CIRCUIT_BREAKER_THRESHOLD=5          # 连续失败次数阈值
CIRCUIT_BREAKER_TIMEOUT=60           # 断路器恢复时间（秒）

# ===================================
# 邮件接收兼容性配置（可选）
# ===================================
# 外部邮件 API 的解析模式
# EMAIL_COMPAT_MODE: "enhanced"（增强解析）| "reliable"（带重试机制）| null（默认通用解析）
# EMAIL_COMPAT_MODE=reliable
EMAIL_REQUEST_TIMEOUT=30.0    # HTTP 请求超时时间（秒）
EMAIL_RETRY_TIMES=3           # 失败重试次数
# EMAIL_API_SSL_VERIFY=true   # SSL 证书验证（仅用于调试）

# ===================================
# Cloudflare Workers KV（可选）
# ===================================
# 启用 Cloudflare Workers KV 作为邮件来源
USE_CLOUDFLARE_KV=false

# 从 https://dash.cloudflare.com 获取（侧边栏中的账户 ID）
CF_ACCOUNT_ID=

# 使用以下命令创建：wrangler kv:namespace create EMAIL_STORAGE
CF_KV_NAMESPACE_ID=

# 在此创建：https://dash.cloudflare.com/profile/api-tokens
# 所需权限：Account > Workers KV Storage > Read
CF_API_TOKEN=

# 智能路由：使用 KV 的域名（JSON 数组）
# ⚠️ 大多数情况下可以省略 - 系统会自动绑定到 CUSTOM_DOMAINS
# 空值/省略 = 自动绑定到 CUSTOM_DOMAINS（如果已启用）
# 指定值 = 仅这些域名使用 KV，其他使用外部 API
# 使用场景：当你有多个自定义域名但只想部分使用 KV 时
# 示例：CF_KV_DOMAINS='["example.com"]'
# CF_KV_DOMAINS=[]

# ===================================
# 域名配置
# ===================================
ENABLE_CUSTOM_DOMAINS=false
CUSTOM_DOMAINS=[]             # JSON 数组：["example.com", "yourdomain.com"]
ENABLE_BUILTIN_DOMAINS=true   # 包含 20 个内置临时域名

# ===================================
# LLM 智能验证码提取（可选）
# ===================================
USE_LLM_EXTRACTION=true
OPENAI_API_KEY=Your_API_Key_Here
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_MODEL=gpt-5
# DEFAULT_CODE_EXTRACTION_METHOD=llm  # 默认提取方法："llm" 或 "pattern"

# ===================================
# 管理员认证
# ===================================
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin123       # ⚠️ 生产环境请务必修改！
ADMIN_SECRET_KEY=your-secret-key-here-change-in-production  # JWT 密钥

# ===================================
# 日志配置
# ===================================
ENABLE_FILE_LOGGING=true      # 启用文件日志
LOG_FILE_PATH=logs            # 日志目录路径
LOG_RETENTION_DAYS=7          # 日志保留天数
LOG_MAX_FILE_SIZE_MB=10       # 单个日志文件最大大小（MB）

# ===================================
# Maileroo 邮件发送服务（可选）
# ===================================
MAILEROO_API_URL=https://smtp.maileroo.com/api/v2/emails
MAILEROO_API_KEY=             # 你的 Maileroo API 密钥

# ===================================
# 调试
# ===================================
DEBUG_EMAIL_FETCH=false       # 启用详细的邮件获取日志

# ===================================
# CORS
# ===================================
CORS_ORIGINS=["*"]            # 允许的来源（JSON 数组或 "*"）
